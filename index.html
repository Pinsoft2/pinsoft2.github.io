<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black Friday Sale Homepage LOL JK</title>
    <link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap" rel="stylesheet">
    <style>
        /* Previous styles remain the same until we add new animations */
        @keyframes portalSpin {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            50% { transform: scale(1) rotate(360deg); opacity: 1; }
            100% { transform: scale(0) rotate(720deg); opacity: 0; }
        }

        @keyframes trunkSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes spiralSparkle {
            0% { transform: translate(-50%, -50%) rotate(0deg) translateX(0) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) rotate(180deg) translateX(50px) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) rotate(360deg) translateX(100px) scale(0); opacity: 0; }
        }

        @keyframes explodeSparkle {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(var(--tx), var(--ty)) scale(1); opacity: 1; }
            100% { transform: translate(calc(var(--tx) * 2), calc(var(--ty) * 2)) scale(0); opacity: 0; }
        }

        .magical-portal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            background-image: url('https://i.pinimg.com/originals/4a/09/9b/4a099b1868c8f9b30f6c22236a05e736.gif');
            background-size: cover;
            display: none;
            z-index: 100;
        }

        .portal-active {
            display: block;
            animation: portalSpin 3s ease-in-out forwards;
        }

        .trunk-spinning {
            animation: trunkSpin 2s ease-in-out forwards;
        }

        .magical-sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, gold, transparent);
            border-radius: 50%;
            pointer-events: none;
        }

        .spiral-sparkle {
            animation: spiralSparkle 1.5s linear forwards;
        }

        .explode-sparkle {
            animation: explodeSparkle 1.5s linear forwards;
        }

        #trunkPasswordPrompt {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(6, 95, 70, 0.95);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 1000;
            color: white;
        }

        /* Rest of your existing styles remain the same */

    </style>
</head>
<body>
    <!-- Previous HTML content remains the same until trunk password prompt -->
    
    <div id="trunkPasswordPrompt">
        <h2>Only the chosen name shall pass</h2>
        <input type="password" id="trunkPasswordInput" placeholder="Password">
        <button onclick="checkTrunkPassword()">Enter</button>
    </div>

    <!-- Rest of your existing HTML -->

    <script>
        // Previous functions remain the same until trunk handling

        function createMagicalSparkles(element) {
            // Create spiral sparkles
            for (let i = 0; i < 12; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'magical-sparkle spiral-sparkle';
                sparkle.style.left = '50%';
                sparkle.style.top = '50%';
                sparkle.style.animationDelay = `${i * 0.1}s`;
                element.appendChild(sparkle);
            }

            // Create exploding sparkles
            for (let i = 0; i < 12; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'magical-sparkle explode-sparkle';
                sparkle.style.left = '50%';
                sparkle.style.top = '50%';
                const angle = (i / 12) * 360;
                const tx = Math.cos(angle * Math.PI / 180) * 100;
                const ty = Math.sin(angle * Math.PI / 180) * 100;
                sparkle.style.setProperty('--tx', `${tx}px`);
                sparkle.style.setProperty('--ty', `${ty}px`);
                sparkle.style.animationDelay = `${i * 0.1}s`;
                element.appendChild(sparkle);
            }

            setTimeout(() => {
                const sparkles = element.querySelectorAll('.magical-sparkle');
                sparkles.forEach(s => s.remove());
            }, 2000);
        }

        function handleTrunkClick() {
            document.getElementById('trunkPasswordPrompt').style.display = 'block';
        }

        function checkTrunkPassword() {
            const password = document.getElementById('trunkPasswordInput').value;
            if (password === 'Spy') {
                document.getElementById('trunkPasswordPrompt').style.display = 'none';
                
                // Create and animate portal
                const portal = document.createElement('div');
                portal.className = 'magical-portal portal-active';
                document.body.appendChild(portal);

                // After portal animation, spin trunk and show number
                setTimeout(() => {
                    portal.remove();
                    const trunk = document.querySelector('.tree-trunk');
                    trunk.classList.add('trunk-spinning');
                    createMagicalSparkles(trunk);

                    // Center and show number after spin
                    setTimeout(() => {
                        const number = document.createElement('div');
                        number.className = 'number';
                        number.style.opacity = '1';
                        number.style.transform = 'none';
                        number.style.position = 'absolute';
                        number.style.left = '50%';
                        number.style.top = '50%';
                        number.style.transform = 'translate(-50%, -50%)';
                        number.textContent = '20';
                        trunk.appendChild(number);
                    }, 2000);
                }, 3000);
            }
        }

        function createTrunk() {
            const trunk = document.createElement('div');
            trunk.className = 'tree-trunk';
            trunk.onclick = handleTrunkClick;
            return trunk;
        }

        // Rest of your existing script remains the same

        window.onload = function() {
            createCalendar();
            
            // Add keypress event for trunk password
            document.getElementById('trunkPasswordInput').addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    checkTrunkPassword();
                }
            });
        };
    </script>
</body>
</html>
